# Gemini CLI 项目文件操作指南

## 📁 项目文件结构概览

```
gemini-cli/
├── 📄 根目录文档 (25个文件)
│   ├── 分析报告系列
│   ├── 工程化文档
│   ├── 业务分析文档
│   └── 项目配置文件
├── 📁 docs/ (20个文件)
│   ├── 📁 cli/ (7个文件) - CLI相关文档
│   ├── 📁 tools/ (8个文件) - 工具文档
│   ├── 📁 core/ (2个文件) - 核心组件文档
│   └── 📄 其他文档 (3个文件)
├── 📁 packages/ - 源代码包
├── 📁 scripts/ - 构建脚本
├── 📁 integration-tests/ - 集成测试
└── 📁 其他目录
```

---

## 🔧 文件操作命令参考

### 1. 文件查看和搜索

#### 查看文件内容
```bash
# 查看单个文件
cat 文件名.md

# 查看文件前几行
head -n 20 文件名.md

# 查看文件后几行
tail -n 20 文件名.md

# 分页查看大文件
less 文件名.md
```

#### 搜索文件内容
```bash
# 在特定文件中搜索
grep "搜索关键词" 文件名.md

# 在所有.md文件中搜索
grep -r "搜索关键词" *.md

# 在docs目录中搜索
grep -r "搜索关键词" docs/

# 搜索并显示行号
grep -n "搜索关键词" 文件名.md
```

#### 查找文件
```bash
# 查找所有.md文件
find . -name "*.md"

# 查找包含特定关键词的文件
find . -name "*.md" -exec grep -l "关键词" {} \;

# 查找最近修改的文件
find . -name "*.md" -mtime -7
```

### 2. 文件移动和重命名

#### 移动文件
```bash
# 移动单个文件
mv 源文件.md 目标目录/

# 移动多个文件
mv 文件1.md 文件2.md 目标目录/

# 移动并重命名
mv 旧文件名.md 新文件名.md
```

#### 批量重命名
```bash
# 重命名所有.md文件（添加前缀）
for file in *.md; do mv "$file" "前缀_$file"; done

# 重命名所有.md文件（替换扩展名）
for file in *.md; do mv "$file" "${file%.md}.txt"; done

# 使用rename命令（如果可用）
rename 's/旧名称/新名称/' *.md
```

### 3. 文件复制和备份

#### 复制文件
```bash
# 复制单个文件
cp 源文件.md 目标文件.md

# 复制到目录
cp 文件.md 目标目录/

# 递归复制目录
cp -r 源目录/ 目标目录/

# 保留文件属性
cp -p 源文件.md 目标文件.md
```

#### 创建备份
```bash
# 创建备份文件
cp 文件.md 文件.md.backup

# 创建带时间戳的备份
cp 文件.md 文件.md.$(date +%Y%m%d_%H%M%S)

# 创建压缩备份
tar -czf 备份.tar.gz *.md
```

### 4. 文件编辑和修改

#### 使用文本编辑器
```bash
# 使用vim编辑
vim 文件名.md

# 使用nano编辑
nano 文件名.md

# 使用VSCode编辑
code 文件名.md

# 使用其他编辑器
emacs 文件名.md
```

#### 批量文本替换
```bash
# 使用sed替换文本
sed 's/旧文本/新文本/g' 文件名.md > 新文件.md

# 直接修改文件
sed -i 's/旧文本/新文本/g' 文件名.md

# 批量替换多个文件
find . -name "*.md" -exec sed -i 's/旧文本/新文本/g' {} \;
```

### 5. 文件删除和清理

#### 删除文件
```bash
# 删除单个文件
rm 文件名.md

# 删除多个文件
rm 文件1.md 文件2.md

# 强制删除（不提示）
rm -f 文件名.md

# 递归删除目录
rm -r 目录名/
```

#### 清理操作
```bash
# 删除所有备份文件
rm *.backup

# 删除临时文件
rm *~ *.tmp

# 删除空文件
find . -name "*.md" -size 0 -delete

# 删除重复文件（需要额外工具）
fdupes -r . | xargs rm
```

---

## 📋 常用文件操作场景

### 1. 文档整理和分类

#### 按主题分类文档
```bash
# 创建分类目录
mkdir -p docs/架构设计 docs/工程化 docs/业务分析 docs/用户指南

# 移动相关文档
mv *架构*.md docs/架构设计/
mv *工程化*.md docs/工程化/
mv *业务*.md docs/业务分析/
mv *用户*.md docs/用户指南/
```

#### 按文件大小分类
```bash
# 查找大文件（>10KB）
find . -name "*.md" -size +10k

# 查找小文件（<1KB）
find . -name "*.md" -size -1k

# 按大小排序
ls -la *.md | sort -k5 -n
```

### 2. 文档格式统一

#### 批量添加文件头
```bash
# 为所有.md文件添加统一头信息
for file in *.md; do
  echo "# 文档标题" > temp.md
  echo "" >> temp.md
  cat "$file" >> temp.md
  mv temp.md "$file"
done
```

#### 统一文件命名
```bash
# 将文件名转换为小写
for file in *.md; do
  mv "$file" "$(echo $file | tr '[:upper:]' '[:lower:]')"
done

# 替换空格为下划线
for file in *.md; do
  mv "$file" "$(echo $file | sed 's/ /_/g')"
done
```

### 3. 文档内容更新

#### 批量更新链接
```bash
# 更新文档中的链接
sed -i 's|旧路径|新路径|g' *.md

# 更新相对链接
sed -i 's|\./docs/|\./docs/|g' *.md
```

#### 批量添加标签
```bash
# 为所有文档添加标签
for file in *.md; do
  echo "" >> "$file"
  echo "---" >> "$file"
  echo "tags: [文档, 项目]" >> "$file"
done
```

---

## 🛠️ 高级文件操作

### 1. 文件内容分析

#### 统计文档信息
```bash
# 统计文件数量
find . -name "*.md" | wc -l

# 统计总行数
find . -name "*.md" -exec wc -l {} + | tail -1

# 统计文件大小
du -sh *.md

# 统计每个目录的文档数量
for dir in */; do
  echo "$dir: $(find "$dir" -name "*.md" | wc -l) files"
done
```

#### 内容分析
```bash
# 查找最常用的词汇
grep -o '\b\w\+\b' *.md | sort | uniq -c | sort -nr | head -10

# 统计标题层级
grep -c "^#" *.md

# 查找未使用的链接
grep -r "\[.*\](" *.md | sed 's/.*\[\([^]]*\)\](\([^)]*\)).*/\2/' | sort | uniq
```

### 2. 自动化脚本

#### 创建文档索引脚本
```bash
#!/bin/bash
# 生成文档索引
echo "# 文档索引" > 文档索引.md
echo "" >> 文档索引.md
echo "## 按目录分类" >> 文档索引.md
echo "" >> 文档索引.md

for dir in */; do
  if [ -d "$dir" ]; then
    echo "### $dir" >> 文档索引.md
    find "$dir" -name "*.md" | while read file; do
      title=$(head -1 "$file" | sed 's/^# //')
      echo "- [$title]($file)" >> 文档索引.md
    done
    echo "" >> 文档索引.md
  fi
done
```

#### 文档备份脚本
```bash
#!/bin/bash
# 自动备份文档
backup_dir="backup_$(date +%Y%m%d_%H%M%S)"
mkdir "$backup_dir"

# 复制所有.md文件
find . -name "*.md" -exec cp --parents {} "$backup_dir" \;

# 创建压缩包
tar -czf "${backup_dir}.tar.gz" "$backup_dir"
rm -rf "$backup_dir"

echo "备份完成: ${backup_dir}.tar.gz"
```

### 3. 版本控制操作

#### Git文件操作
```bash
# 查看文件变更历史
git log --follow 文件名.md

# 查看文件的特定版本
git show HEAD:文件名.md

# 恢复文件到特定版本
git checkout HEAD~1 文件名.md

# 批量添加新文件
git add *.md

# 提交文档变更
git commit -m "更新文档: 添加新的分析报告"
```

---

## ⚠️ 注意事项

### 1. 安全操作
- **备份重要文件**: 在进行批量操作前，先创建备份
- **测试命令**: 在重要文件上执行命令前，先在测试文件上验证
- **权限检查**: 确保有足够的权限进行文件操作

### 2. 文件命名规范
- **避免特殊字符**: 文件名中避免使用空格、特殊符号
- **使用小写**: 统一使用小写字母命名文件
- **描述性命名**: 文件名应该能清楚描述内容

### 3. 路径管理
- **相对路径**: 优先使用相对路径，便于项目迁移
- **路径一致性**: 保持文档中链接路径的一致性
- **路径更新**: 移动文件后及时更新相关链接

### 4. 内容管理
- **版本控制**: 重要文档变更要提交到版本控制系统
- **内容备份**: 定期备份重要文档内容
- **格式统一**: 保持文档格式的一致性

---

## 📞 获取帮助

### 命令帮助
```bash
# 查看命令帮助
man 命令名
命令名 --help

# 查看bash内置命令帮助
help 命令名
```

### 在线资源
- **Linux命令大全**: https://man.linuxde.net/
- **Git文档**: https://git-scm.com/doc
- **Shell脚本教程**: https://www.runoob.com/linux/linux-shell.html

---

*本指南涵盖了项目中常见的文件操作场景，帮助您高效地管理和维护项目文档。* 